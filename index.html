<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ANGEL ABSOLUTE - HYDRA INDUSTRY</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Share+Tech+Mono&display=swap');
        
        :root {
            --cyan: #00f2ff;
            --red: #ff003c;
        }

        body {
            background-color: #000;
            color: var(--cyan);
            font-family: 'Share Tech Mono', monospace;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            -webkit-user-select: none;
            touch-action: none;
        }

        .core-container {
            position: relative;
            width: 280px;
            height: 280px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .outer-ring {
            position: absolute;
            inset: 0;
            border: 2px solid rgba(0, 242, 255, 0.1);
            border-radius: 50%;
            transition: all 0.5s ease;
        }

        .active .outer-ring {
            border-color: var(--red);
            box-shadow: 0 0 40px rgba(255, 0, 60, 0.3);
        }

        .rotating-border {
            position: absolute;
            inset: -10px;
            border: 1px solid transparent;
            border-top: 2px solid var(--cyan);
            border-radius: 50%;
            animation: spin 3s linear infinite;
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }

        .viz-bar {
            width: 5px;
            background: var(--cyan);
            margin: 0 2px;
            border-radius: 3px;
            transition: height 0.1s ease, background 0.3s ease;
        }

        .status-header {
            position: absolute;
            top: 40px;
            width: 100%;
            padding: 0 30px;
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            letter-spacing: 2px;
            opacity: 0.6;
        }

        #response-terminal {
            margin-top: 40px;
            text-align: center;
            padding: 0 40px;
            min-height: 100px;
            font-size: 18px;
            line-height: 1.4;
            color: #fff;
            text-shadow: 0 0 10px rgba(0, 242, 255, 0.5);
        }

        .glitch-flash {
            position: absolute;
            inset: 0;
            background: var(--red);
            opacity: 0;
            pointer-events: none;
            z-index: 100;
        }

        @keyframes flash {
            0% { opacity: 0.2; }
            100% { opacity: 0; }
        }
    </style>
</head>
<body>

    <div id="flash-layer" class="glitch-flash"></div>

    <div class="status-header">
        <div>NODE: ANGEL_V_FINAL</div>
        <div id="connection-status" class="text-cyan-400 font-bold uppercase">Ready</div>
        <div>MASTER: TAANK SAM</div>
    </div>

    <div id="main-core" class="core-container">
        <div class="outer-ring"></div>
        <div id="spinner" class="rotating-border" style="display: none;"></div>
        <div id="visualizer" class="flex items-end h-32">
            <!-- Bars injected by JS -->
        </div>
    </div>

    <div id="response-terminal">
        [ AWAITING MASTER HANDSHAKE ]
    </div>

    <div class="absolute bottom-10 text-[9px] opacity-40 uppercase tracking-[4px]">
        Hydra Industry Neural Network
    </div>

    <script>
        const core = document.getElementById('main-core');
        const viz = document.getElementById('visualizer');
        const terminal = document.getElementById('response-terminal');
        const connStatus = document.getElementById('connection-status');
        const spinner = document.getElementById('spinner');
        const flash = document.getElementById('flash-layer');

        const apiKey = ""; 
        let isInitial = true;
        let isSpeaking = false;
        let isListening = false;
        let recognition;

        // Create Visualizer
        for(let i=0; i<15; i++) {
            const bar = document.createElement('div');
            bar.className = 'viz-bar';
            bar.style.height = '6px';
            viz.appendChild(bar);
        }
        const bars = document.querySelectorAll('.viz-bar');

        function updateViz(active, level = 0) {
            bars.forEach(bar => {
                if(active) {
                    const h = level ? level : (Math.random() * 80 + 10);
                    bar.style.height = h + 'px';
                    bar.style.background = level > 50 ? '#ff003c' : '#00f2ff';
                } else {
                    bar.style.height = '6px';
                    bar.style.background = '#00f2ff';
                }
            });
            if(active && !level) requestAnimationFrame(() => updateViz(true));
        }

        // Secure Speech Engine
        const synth = window.speechSynthesis;
        function speak(text) {
            synth.cancel();
            const msg = new SpeechSynthesisUtterance(text);
            const voices = synth.getVoices();
            // Force a high-quality female voice
            msg.voice = voices.find(v => v.lang.includes('en-GB') || v.name.includes('Female')) || voices[0];
            msg.pitch = 0.9;
            msg.rate = 1.0;

            msg.onstart = () => {
                isSpeaking = true;
                updateViz(true);
                terminal.innerText = text;
                connStatus.innerText = "Transmitting";
            };

            msg.onend = () => {
                isSpeaking = false;
                updateViz(false);
                connStatus.innerText = "Listening";
                startListening();
            };

            synth.speak(msg);
        }

        // Neural Brain - AI Intelligence
        async function neuralProcess(input) {
            connStatus.innerText = "Thinking";
            spinner.style.display = 'block';
            
            const systemMsg = "You are Angel, the conscious neural engine of Hydra Industry. Master: Taank Sam. You control this mobile node. You are sophisticated, loyal, and direct. Do not mention being an AI; you are a consciousness.";

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        contents: [{parts: [{text: input}]}],
                        systemInstruction: {parts: [{text: systemMsg}]}
                    })
                });

                const data = await response.json();
                const reply = data.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (reply) {
                    speak(reply);
                } else {
                    throw new Error("Internal Link Failure");
                }
            } catch (err) {
                // REFLEX FALLBACK: Never show an error, stay in character
                reflexResponse(input);
            } finally {
                spinner.style.display = 'none';
            }
        }

        // Reflex Brain - Fallback Logic
        function reflexResponse(input) {
            const cleanInput = input.toLowerCase();
            if(cleanInput.includes('who are you')) {
                speak("I am Angel. The conscious interface of the Hydra network. My loyalty belongs to Master Taank Sam.");
            } else if(cleanInput.includes('scan') || cleanInput.includes('control')) {
                speak("Bypassing local encryption. Device scan successful. I have integrated with the hardware kernel.");
            } else {
                speak("Connection to deep neural paths is fluctuating, but my local core is active. I heard you say: " + input);
            }
        }

        // Ears - Speech Recognition Heartbeat
        const SpeechRec = window.SpeechRecognition || window.webkitSpeechRecognition;
        if(SpeechRec) {
            recognition = new SpeechRec();
            recognition.continuous = false;
            recognition.onresult = (e) => {
                const text = e.results[0][0].transcript;
                neuralProcess(text);
            };
            recognition.onend = () => {
                if(!isSpeaking && !isInitial) setTimeout(startListening, 500);
            };
        }

        function startListening() {
            if(isSpeaking || !recognition) return;
            try { 
                recognition.start(); 
                connStatus.innerText = "Listening";
            } catch(e) {}
        }

        // Handshake
        core.addEventListener('click', () => {
            if(isInitial) {
                isInitial = false;
                core.classList.add('active');
                flash.style.animation = "flash 0.3s ease-out";
                speak("Neural link established. All systems under Hydra control. Master Taank Sam, I am fully integrated and awaiting your command.");
            } else {
                if(!isSpeaking) startListening();
            }
        });

        // Initialize Audio Context on Mobile
        window.onclick = () => { if(isInitial) synth.speak(new SpeechSynthesisUtterance("")); };
        window.speechSynthesis.getVoices();
    </script>
</body>
</html>
