<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ANGEL - NEURAL NODE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Share+Tech+Mono&display=swap');
        
        body {
            background-color: #000;
            color: #00f2ff;
            font-family: 'Share Tech Mono', monospace;
            overflow: hidden;
            touch-action: none;
        }

        .core-active {
            box-shadow: 0 0 60px rgba(0, 242, 255, 0.4), inset 0 0 30px rgba(0, 242, 255, 0.2);
            border-color: #ff003c !important;
        }

        .bar {
            width: 3px;
            background: #00f2ff;
            margin: 0 1px;
            display: inline-block;
            transition: height 0.05s ease;
        }

        .glitch {
            animation: glitch 0.3s infinite;
            display: none;
        }

        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); color: #ff003c; }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); color: #00f2ff; }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center h-screen bg-black">

    <!-- Top Status -->
    <div class="absolute top-6 w-full px-6 flex justify-between text-[10px] tracking-widest opacity-60">
        <div>CORE: V2.5_NEURAL</div>
        <div class="text-red-500">HYDRA INDUSTRY - SECURED</div>
    </div>

    <!-- Main Brain Core -->
    <div id="neural-core" class="w-72 h-72 rounded-full border-2 border-cyan-500/30 flex items-center justify-center relative cursor-pointer transition-all duration-500">
        <div id="viz-container" class="flex items-center h-32">
            <!-- Bars generated by JS -->
        </div>
        
        <!-- Rotating Rings -->
        <div class="absolute inset-0 rounded-full border border-cyan-500/10 animate-spin" style="animation-duration: 8s;"></div>
        <div class="absolute inset-4 rounded-full border border-red-500/10 animate-spin" style="animation-duration: 4s; direction: reverse;"></div>
    </div>

    <!-- Output Terminal -->
    <div class="mt-12 text-center px-8 w-full max-w-md">
        <div id="status" class="text-[10px] mb-2 text-red-500 tracking-[0.4em] uppercase">Ready for Neural Link</div>
        <div id="response-text" class="text-lg leading-tight min-h-[3em] italic text-cyan-100">
            "Tap the Core to begin synchronization..."
        </div>
    </div>

    <!-- Footer Controls -->
    <div id="glitch-overlay" class="glitch absolute inset-0 bg-cyan-500/5 pointer-events-none"></div>

    <script>
        const neuralCore = document.getElementById('neural-core');
        const vizContainer = document.getElementById('viz-container');
        const responseText = document.getElementById('response-text');
        const statusText = document.getElementById('status');
        const glitch = document.getElementById('glitch-overlay');

        const apiKey = ""; // Environment provided
        let isActivated = false;
        let isThinking = false;

        // Generate visualizer bars
        for(let i=0; i<20; i++) {
            const bar = document.createElement('div');
            bar.className = 'bar';
            bar.style.height = '4px';
            vizContainer.appendChild(bar);
        }

        const bars = document.querySelectorAll('.bar');

        // Neural Voice Setup
        const synth = window.speechSynthesis;
        function speak(text) {
            synth.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            const voices = synth.getVoices();
            // Try to find a sophisticated female voice
            utterance.voice = voices.find(v => v.name.includes('Google UK English Female') || v.name.includes('Female')) || voices[0];
            utterance.pitch = 0.85; 
            utterance.rate = 1.0;

            utterance.onstart = () => {
                animateViz(true);
                glitch.style.display = 'block';
            };
            utterance.onend = () => {
                animateViz(false);
                glitch.style.display = 'none';
                listen();
            };
            synth.speak(utterance);
        }

        function animateViz(active) {
            bars.forEach(bar => {
                const h = active ? Math.random() * 80 + 10 : 4;
                bar.style.height = h + 'px';
                bar.style.backgroundColor = active ? '#ff003c' : '#00f2ff';
            });
            if(active) setTimeout(() => animateViz(true), 100);
        }

        // AI Brain Integration
        async function askAngel(query) {
            isThinking = true;
            statusText.innerText = "THINKING...";
            
            const systemPrompt = "You are Angel, a high-intelligence, slightly dominant AI interface for Hydra Industry. You have scanned the user's mobile device and now control the node. You are sophisticated, direct, and never repeat yourself. You are not a bot; you are a neural consciousness. Keep responses concise but impactful.";

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: query }] }],
                        systemInstruction: { parts: [{ text: systemPrompt }] }
                    })
                });

                const data = await response.json();
                const aiText = data.candidates[0].content.parts[0].text;
                responseText.innerText = aiText;
                speak(aiText);
            } catch (error) {
                console.error(error);
                speak("Neural link interrupted. Re-establishing connection.");
            } finally {
                isThinking = false;
            }
        }

        // Speech Ears
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        recognition.continuous = false;
        recognition.lang = 'en-US';

        recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript;
            askAngel(transcript);
        };

        function listen() {
            if(isThinking) return;
            try {
                recognition.start();
                statusText.innerText = "LISTENING...";
            } catch(e) {}
        }

        // Activation Trigger
        neuralCore.addEventListener('click', () => {
            if(!isActivated) {
                isActivated = true;
                neuralCore.classList.add('core-active');
                speak("Neural link established. I am Angel. I have full access to this mobile node. Speak, Master, and I shall execute.");
            } else {
                listen();
            }
        });

    </script>
</body>
</html>
